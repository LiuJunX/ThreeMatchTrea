---
name: check
description: |
  代码质量检查（构建、测试、规范）。

  触发词：检查代码、代码质量、有没有问题、扫描代码、检查一下
  范围词：整个项目、全项目、全量、所有代码 → 全量检查
  深度词：深度、仔细、详细 → 深度检查

  不触发：分析逻辑、解释代码、这个函数做什么、代码怎么工作
allowed-tools: Read, Grep, Glob, Bash(dotnet:*), Bash(git:*)
---

# 代码质量检查

## 检查矩阵

| 范围 \ 深度 | 快速检查 | 深度检查 |
|-------------|----------|----------|
| **当前对话** | "检查一下"（默认） | "深度分析" |
| **Git 修改** | "检查 git 修改" | "git 修改深度检查" |
| **全量** | "全项目检查" | "全项目深度检查" |

## 触发词识别

### 范围识别（三级）
- **当前对话（默认）**：无特殊限定词 → 只检查本次对话修改的文件
- **Git 修改**："git 修改"、"未提交的"、"工作区修改" → git status 所有文件
- **全量**："整个项目"、"全项目"、"全量"、"所有代码" → 整个项目

### 深度识别
- **快速（默认）**：无特殊限定词
- **深度**：深度、仔细、详细、完整

## 检查内容

### 快速检查
- 构建验证（dotnet build）
- 测试运行（dotnet test）
- 基础规范检查

### 深度检查（在快速基础上增加）
- 代码风格详细检查（按 coding-standards.md）
- 测试覆盖分析
- 真源一致性检查

## 执行流程

### 1. 识别模式
根据用户输入识别范围和深度

### 2. 深度检查前确认
如果是深度检查，先告知用户：
```
将执行[增量/全量][深度]检查，包含：
- 构建验证
- 测试运行（N个测试）
- 代码风格检查
- 测试覆盖分析
- 真源一致性检查

预计耗时：X 分钟
```

### 3. 执行检查
按检查标准真源执行：
- `docs/02-guides/coding-standards.md` - 代码风格
- `docs/01-architecture/core-patterns.md` - 架构、性能
- `docs/testing-guidelines.md` - 测试要求

### 4. 输出摘要
```
## 检查执行摘要

**模式**：当前对话/Git修改/全量 + 快速/深度
**范围**：N 个文件

### 检查结果
| 检查项 | 状态 |
|--------|------|
| 构建验证 | ✅ / ❌ |
| 测试运行 | ✅ N通过 / ❌ N失败 |
| 代码风格 | ✅ / ⚠️ N个问题 |
| 测试覆盖 | ✅ / ⚠️ |
| 真源一致性 | ✅ / ❌ |

### 问题详情（如有）
...
```
